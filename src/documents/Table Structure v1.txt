SIGNUP
--------------
SIGNUP_ID (PK)
USER_NAME (Unique)
PASSWORD


CREATE TABLE SIGNUP (SIGNUP_ID VARCHAR2(20) PRIMARY KEY NOT NULL, PASSWORD VARCHAR2(15) NOT NULL);




USER
--------------
USER_ID (PK)
USER_NAME (FK)
USER_CREATE_TIMESTAMP
USER_DELETE_TIMESTAMP
USER_DELETED_FLAG


CREATE TABLE USER (USER_ID NUMBER(10) PRIMARY KEY NOT NULL, SIGNUP_ID VARCHAR2 , FOREIGN KEY (SIGNUP_ID) REFERENCES SIGNUP(SIGNUP_ID)
, USER_CREATE_TIMESTAMP TIMESTAMP, USER_DELETE_TIMESTAMP TIMESTAMP, USER_DELETED_FLAG VARCHAR2(1) CONSTRAINT FLAG_CHK CHECK (USER_DELETED_FLAG IN ('Y','N')));



USER_DTL
--------------
UD_ID (PK)
USER_ID (FK)
NAME
USER_MAIL_ID
USER_MOBILE
USER_COUNTRY
USER_CURRENCY


CREATE TABLE USER_DTL (UD_ID NUMBER(10) PRIMARY KEY NOT NULL, USER_ID NUMBER, FOREIGN KEY(USER_ID) REFERENCES USER(USER_ID), NAME VARCHAR2(30), USER_MAIL_ID VARCHAR2(30), USER_MOBILE NUMBER(15), USER_COUNTRY  VARCHAR2(10), USER_CURRENCY VARCHAR2(10));



GROUPS
--------------
GROUP_ID (PK)
GROUP_NAME
GRP_CURRENCY
GRP_CREATE_TIMESTAMP
GRP_DELETE_TIMESTAMP
GRP_DELETED_FLAG


CREATE TABLE GROUPS(GROUP_ID NUMBER(10) PRIMARY KEY NOT NULL, GROUP_NAME VARCHAR2(50), GRP_CURRENCY VARCHAR2(10), 
GRP_CREATE_TIMESTAMP TIMESTAMP, GRP_DELETE_TIMESTAMP TIMESTAMP, GRP_DELETED_FLAG VARCHAR2(1) CONSTRAINT FLAG_CHK CHECK (GRP_DELETED_FLAG IN ('Y','N')));



USER_GROUP
--------------
UG_ID (PK)
GROUP_ID (FK)
USER_ID (FK)
USER_ENTRY_TIMESTAMP
USER_DELETION_TIMESTAMP
USER_ACTIVE


CREATE TABLE USER_GROUP(UG_ID NUMBER(10) PRIMARY KEY NOT NULL,GROUP_ID NUMBER, FOREIGN KEY(GROUP_ID) REFERENCES GROUPS(GROUP_ID), USER_ID NUMBER, FOREIGN KEY(USER_ID) REFERENCES USER(USER_ID),
USER_ENTRY_TIMESTAMP TIMESTAMP, USER_DELETION_TIMESTAMP TIMESTAMP, USER_ACTIVE VARCHAR2(1) CONSTRAINT USER_ACTIVE_CHK CHECK (USER_ACTIVE IN ('Y','N')));



TRANSACTION
--------------
TXN_ID (PK)
PAID_BY (FK -> USER_ID)
GROUP_ID (FK)
SHARE_TYPE
TXN_CREATE_TIMESTAMP
TXN_DELETE_TIMESTAMP


CREATE TABLE TRANSACTION(TXN_ID NUMBER(15) PRIMARY KEY NOT NULL, PAID_BY NUMBER, FOREIGN KEY(PAID_BY) REFERENCES USER(USER_ID), GROUP_ID NUMBER, FOREIGN KEY(GROUP_ID) REFERENCES GROUPS(GROUP_ID),
SHARE_TYPE VARCHAR2(30), TXN_CREATE_TIMESTAMP TIMESTAMP, TXN_DELETE_TIMESTAMP TIMESTAMP);



SPLIT
--------------
SPLIT_ID (PK)
TXN_ID (FK)
TXN_TOTAL_AMT
SPLIT_USER_ID (FK -> USER_ID) 
SHARE_AMOUNT 
CREDIT (Y/N)
SPLIT_ACTIVE
SPLIT_TIMESTAMP


CREATE TABLE SPLIT(SPLIT_ID NUMBER(15), TXN_ID NUMBER, FOREIGN KEY(TXN_ID) REFERENCES TRANSACTION(TXN_ID), TXN_TOTAL_AMT NUMBER(15), SPLIT_USER_ID NUMBER, FOREIGN KEY(SPLIT_USER_ID) REFERENCES USER(USER_ID),
SHARE_AMOUNT NUMBER(15), CREDIT VARCHAR2(1) CONSTRAINT CREDIT_CHK CHECK (CREDIT IN ('Y','N')), SPLIT_ACTIVE VARCHAR2(1) CONSTRAINT SPLIT_ACTIVE_CHK CHECK (SPLIT_ACTIVE IN ('Y','N')), SPLIT_TIMESTAMP TIMESTAMP);




